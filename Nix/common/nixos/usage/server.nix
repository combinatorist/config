################################################################################
##                                                                            ##
##                         Configuration for servers                          ##
##                                                                            ##
################################################################################

{ config, lib, pkgs, ... }:

{
  ############################################################################
  ##                                confkit                                 ##
  ############################################################################

  confkit = {
    # Use Vim as a lightweight backup for Emacs TRAMP.
    vim.enable = true;
  };

  ############################################################################
  ##                                Services                                ##
  ############################################################################

  services = {
    openssh = {
      enable = true;
      passwordAuthentication = false;
    };
  };

  ############################################################################
  ##                                 Programs                               ##
  ############################################################################

  programs = {
    mosh.enable = true;
  };

  ############################################################################
  ##                            System packages                             ##
  ############################################################################

  environment.systemPackages = with pkgs; [
    # Syncoid expect these tools to be in PATH for remote accesses.
    lzop
    mbuffer
  ];
}
